Starting job 16144620 ("rnn-reproduce") on c16-27 at mån dec 12 21:39:55 CET 2016
Python environment is set up
Copying files to /work/jobs/16144620.d...
We are now in conll16st-v34-focused-rnns
Starting RNN run
NAME: 
LOCAL_BASE_DIR: /usit/abel/u1/jimmycallin/
EMBEDDING_PATH: /work/jobs/16144620.d/resources/word_embeddings/precompiled/rsv/wiki_2008_d100_w1_ncntx10000.wembed
DATA_BASE_PATH: /usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16
MODEL_STORE_PATH: /usit/abel/u1/jimmycallin/models/rnn-reproduce
CONFIG: --config={"filter_fn_name":"conn_gt_0","words_dim":20,"focus_dim":6,"rnn_dim":50,"final_dim":40}
Using Theano backend.
[2016-12-12 21:43] configuration (/usit/abel/u1/jimmycallin/models/rnn-reproduce)
[2016-12-12 21:43]     config 'epochs':  (1000)
[2016-12-12 21:43]     config 'epochs_len':  (-1)
[2016-12-12 21:43]     config 'epochs_patience':  (20)
[2016-12-12 21:43]     config 'batch_size':  (64)
[2016-12-12 21:43]     config 'snapshot_size':  (2048)
[2016-12-12 21:43]     config 'random_per_sample':  (32)
[2016-12-12 21:43]     config 'words_dim': 20 (20)
[2016-12-12 21:43]     config 'focus_dim': 6 (4)
[2016-12-12 21:43]     config 'rnn_dim': 50 (20)
[2016-12-12 21:43]     config 'final_dim': 40 (100)
[2016-12-12 21:43]     config 'arg1_len':  (100)
[2016-12-12 21:43]     config 'arg2_len':  (100)
[2016-12-12 21:43]     config 'conn_len':  (10)
[2016-12-12 21:43]     config 'punc_len':  (2)
[2016-12-12 21:43]     config 'words_dropout':  (0.1)
[2016-12-12 21:43]     config 'focus_dropout_W':  (0.33)
[2016-12-12 21:43]     config 'focus_dropout_U':  (0.66)
[2016-12-12 21:43]     config 'rnn_dropout_W':  (0.33)
[2016-12-12 21:43]     config 'rnn_dropout_U':  (0.33)
[2016-12-12 21:43]     config 'final_dropout':  (0.5)
[2016-12-12 21:43]     config 'filter_fn_name': conn_gt_0 (conn_eq_0)
[2016-12-12 21:43]     config 'words2vec_bin':  (None)
[2016-12-12 21:43]     config 'words2vec_txt':  (None)
Traceback (most recent call last):
  File "./v34/train.py", line 125, in <module>
    log.info("  {}: {}".format(var, eval(var)))
  File "<string>", line 1, in <module>
AttributeError: 'Namespace' object has no attribute 'lang'
> <string>(1)<module>()
(Pdb) 

Currently Loaded Modulefiles:
  1) intel/2017.0

Job script resource usage:
       JobID  MaxVMSize     MaxRSS 
------------ ---------- ---------- 
16144620.ba+    258316K      8280K 

Job step resource usage:
       JobID    JobName  AllocCPUS  MaxVMSize     MaxRSS    Elapsed ExitCode 
------------ ---------- ---------- ---------- ---------- ---------- -------- 
16144620     rnn-repro+          3                         00:03:30      0:0 

Job 16144620 ("rnn-reproduce") completed on c16-27 at mån dec 12 21:43:20 CET 2016
Starting job 16144731 ("rnn-reproduce") on c14-7 at mån dec 12 21:47:40 CET 2016
Python environment is set up
Copying files to /work/jobs/16144731.d...
We are now in conll16st-v34-focused-rnns
Starting RNN run
NAME: 
LOCAL_BASE_DIR: /usit/abel/u1/jimmycallin/
EMBEDDING_PATH: /work/jobs/16144731.d/resources/word_embeddings/precompiled/rsv/wiki_2008_d100_w1_ncntx10000.wembed
DATA_BASE_PATH: /usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16
MODEL_STORE_PATH: /usit/abel/u1/jimmycallin/models/rnn-reproduce
CONFIG: --config={"filter_fn_name":"conn_gt_0","words_dim":20,"focus_dim":6,"rnn_dim":50,"final_dim":40}
Using Theano backend.
[2016-12-12 21:50] configuration (/usit/abel/u1/jimmycallin/models/rnn-reproduce)
[2016-12-12 21:50]     config 'epochs':  (1000)
[2016-12-12 21:50]     config 'epochs_len':  (-1)
[2016-12-12 21:50]     config 'epochs_patience':  (20)
[2016-12-12 21:50]     config 'batch_size':  (64)
[2016-12-12 21:50]     config 'snapshot_size':  (2048)
[2016-12-12 21:50]     config 'random_per_sample':  (32)
[2016-12-12 21:50]     config 'words_dim': 20 (20)
[2016-12-12 21:50]     config 'focus_dim': 6 (4)
[2016-12-12 21:50]     config 'rnn_dim': 50 (20)
[2016-12-12 21:50]     config 'final_dim': 40 (100)
[2016-12-12 21:50]     config 'arg1_len':  (100)
[2016-12-12 21:50]     config 'arg2_len':  (100)
[2016-12-12 21:50]     config 'conn_len':  (10)
[2016-12-12 21:50]     config 'punc_len':  (2)
[2016-12-12 21:50]     config 'words_dropout':  (0.1)
[2016-12-12 21:50]     config 'focus_dropout_W':  (0.33)
[2016-12-12 21:50]     config 'focus_dropout_U':  (0.66)
[2016-12-12 21:50]     config 'rnn_dropout_W':  (0.33)
[2016-12-12 21:50]     config 'rnn_dropout_U':  (0.33)
[2016-12-12 21:50]     config 'final_dropout':  (0.5)
[2016-12-12 21:50]     config 'filter_fn_name': conn_gt_0 (conn_eq_0)
[2016-12-12 21:50]     config 'words2vec_bin':  (None)
[2016-12-12 21:50]     config 'words2vec_txt':  (None)
[2016-12-12 21:50]   args.experiment_dir: /usit/abel/u1/jimmycallin/models/rnn-reproduce
[2016-12-12 21:50]   args.train_dir: /usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-train
[2016-12-12 21:50]   args.valid_dir: /usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-dev
[2016-12-12 21:50]   K._config: {u'image_dim_ordering': u'tf', u'backend': u'theano', u'floatx': u'float32', u'epsilon': 1e-07}
[2016-12-12 21:50]   os.getenv("THEANO_FLAGS"): None
[2016-12-12 21:50]   filter_types: None
[2016-12-12 21:50]   filter_senses: None
[2016-12-12 21:50]   filter_fn_name: conn_gt_0
[2016-12-12 21:50]   config: {u'focus_dim': 6, u'final_dim': 40, u'words_dim': 20, u'rnn_dim': 50, u'filter_fn_name': u'conn_gt_0'}
[2016-12-12 21:50] load dataset for training (/usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-train)
[2016-12-12 21:56] lang: ?, doc_ids: 1756, words: 933049, rel_ids: 17289, relation tokens: 676659
[2016-12-12 21:56] load dataset for validation (/usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-dev)
[2016-12-12 21:56] lang: ?, doc_ids: 79, words: 39712, rel_ids: 737, relation tokens: 28745
[2016-12-12 21:56] build indexes
[2016-12-12 21:56]   rel_senses2id: 22, words2id: 43918
[2016-12-12 21:56] build model
[2016-12-12 21:57]     config 'rsenses_loss':  (categorical_crossentropy)
[2016-12-12 21:57]     config 'optimizer':  (adam)
[2016-12-12 21:57] initialize weights
[2016-12-12 21:57] prepare snapshots
[2016-12-12 21:57] train model
/usit/abel/u1/jimmycallin/miniconda2/envs/rnn/lib/python2.7/site-packages/keras/engine/training.py:1397: UserWarning: Epoch comprised more than `samples_per_epoch` samples, which might affect learning results. Set `samples_per_epoch` correctly to avoid this warning.
  warnings.warn('Epoch comprised more than '
/var/spool/slurmd/job16144731/slurm_script: rad 63: 25792 Dödad                  ./v34/train.py $MODEL_STORE_PATH $DATA_BASE_PATH-train $DATA_BASE_PATH-dev --clean "$CONFIG"

Currently Loaded Modulefiles:
  1) intel/2017.0

Job script resource usage:
       JobID  MaxVMSize     MaxRSS 
------------ ---------- ---------- 
16144731.ba+  32861436K  31393992K 

Job step resource usage:
       JobID    JobName  AllocCPUS  MaxVMSize     MaxRSS    Elapsed ExitCode 
------------ ---------- ---------- ---------- ---------- ---------- -------- 
16144731     rnn-repro+          3                         07:31:59      0:0 

Job 16144731 ("rnn-reproduce") completed on c14-7 at tis dec 13 05:19:34 CET 2016
slurmstepd: Exceeded step memory limit at some point.
Starting job 16151497 ("rnn-reproduce") on c12-33 at tis dec 13 14:05:06 CET 2016
Python environment is set up
Copying files to /work/jobs/16151497.d...
We are now in conll16st-v34-focused-rnns
Starting RNN run
NAME: 
LOCAL_BASE_DIR: /usit/abel/u1/jimmycallin/
EMBEDDING_PATH: /work/jobs/16151497.d/resources/word_embeddings/precompiled/rsv/wiki_2008_d100_w1_ncntx10000.wembed
DATA_BASE_PATH: /usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16
MODEL_STORE_PATH: /usit/abel/u1/jimmycallin/models/rnn-reproduce
CONFIG: --config={"filter_fn_name":"conn_gt_0","words_dim":20,"focus_dim":6,"rnn_dim":50,"final_dim":40}
Using Theano backend.
[2016-12-13 14:10] configuration (/usit/abel/u1/jimmycallin/models/rnn-reproduce)
[2016-12-13 14:10]     config 'epochs':  (1000)
[2016-12-13 14:10]     config 'epochs_len':  (-1)
[2016-12-13 14:10]     config 'epochs_patience':  (20)
[2016-12-13 14:10]     config 'batch_size':  (64)
[2016-12-13 14:10]     config 'snapshot_size':  (2048)
[2016-12-13 14:10]     config 'random_per_sample':  (32)
[2016-12-13 14:10]     config 'words_dim': 20 (20)
[2016-12-13 14:10]     config 'focus_dim': 6 (4)
[2016-12-13 14:10]     config 'rnn_dim': 50 (20)
[2016-12-13 14:10]     config 'final_dim': 40 (100)
[2016-12-13 14:10]     config 'arg1_len':  (100)
[2016-12-13 14:10]     config 'arg2_len':  (100)
[2016-12-13 14:10]     config 'conn_len':  (10)
[2016-12-13 14:10]     config 'punc_len':  (2)
[2016-12-13 14:10]     config 'words_dropout':  (0.1)
[2016-12-13 14:10]     config 'focus_dropout_W':  (0.33)
[2016-12-13 14:10]     config 'focus_dropout_U':  (0.66)
[2016-12-13 14:10]     config 'rnn_dropout_W':  (0.33)
[2016-12-13 14:10]     config 'rnn_dropout_U':  (0.33)
[2016-12-13 14:10]     config 'final_dropout':  (0.5)
[2016-12-13 14:10]     config 'filter_fn_name': conn_gt_0 (conn_eq_0)
[2016-12-13 14:10]     config 'words2vec_bin':  (None)
[2016-12-13 14:10]     config 'words2vec_txt':  (None)
[2016-12-13 14:10]   args.experiment_dir: /usit/abel/u1/jimmycallin/models/rnn-reproduce
[2016-12-13 14:10]   args.train_dir: /usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-train
[2016-12-13 14:10]   args.valid_dir: /usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-dev
[2016-12-13 14:10]   K._config: {u'image_dim_ordering': u'tf', u'backend': u'theano', u'floatx': u'float32', u'epsilon': 1e-07}
[2016-12-13 14:10]   os.getenv("THEANO_FLAGS"): None
[2016-12-13 14:10]   filter_types: None
[2016-12-13 14:10]   filter_senses: None
[2016-12-13 14:10]   filter_fn_name: conn_gt_0
[2016-12-13 14:10]   config: {u'focus_dim': 6, u'final_dim': 40, u'words_dim': 20, u'rnn_dim': 50, u'filter_fn_name': u'conn_gt_0'}
[2016-12-13 14:10] load dataset for training (/usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-train)
[2016-12-13 14:17] lang: ?, doc_ids: 1756, words: 933049, rel_ids: 17289, relation tokens: 676659
[2016-12-13 14:17] load dataset for validation (/usit/abel/u1/jimmycallin/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-dev)
[2016-12-13 14:17] lang: ?, doc_ids: 79, words: 39712, rel_ids: 737, relation tokens: 28745
[2016-12-13 14:17] build indexes
[2016-12-13 14:17]   rel_senses2id: 22, words2id: 43918
[2016-12-13 14:17] build model
[2016-12-13 14:18]     config 'rsenses_loss':  (categorical_crossentropy)
[2016-12-13 14:18]     config 'optimizer':  (adam)
[2016-12-13 14:18] initialize weights
[2016-12-13 14:18] prepare snapshots
[2016-12-13 14:18] train model
/usit/abel/u1/jimmycallin/miniconda2/envs/rnn/lib/python2.7/site-packages/keras/engine/training.py:1397: UserWarning: Epoch comprised more than `samples_per_epoch` samples, which might affect learning results. Set `samples_per_epoch` correctly to avoid this warning.
  warnings.warn('Epoch comprised more than '
slurmstepd: *** JOB 16151497 ON c12-33 CANCELLED AT 2016-12-13T16:28:26 ***

Currently Loaded Modulefiles:
  1) intel/2017.0

Job script resource usage:
       JobID  MaxVMSize     MaxRSS 
------------ ---------- ---------- 
16151497.ba+  14590892K  13124452K 

Job step resource usage:
       JobID    JobName  AllocCPUS  MaxVMSize     MaxRSS    Elapsed ExitCode 
------------ ---------- ---------- ---------- ---------- ---------- -------- 
16151497     rnn-repro+          2                         02:23:23      0:0 

Job 16151497 ("rnn-reproduce") completed on c12-33 at tis dec 13 16:28:26 CET 2016
Starting job 16153023 ("rnn-reproduce") on c16-3 at tis dec 13 16:38:07 CET 2016
Python environment is set up
Copying files to /work/jobs/16153023.d...
We are now in conll16st-v34-focused-rnns
Starting RNN run
NAME: rnn-reproduce
LOCAL_BASE_DIR: /usit/abel/u1/jimmycallin/
EMBEDDING_PATH: /work/jobs/16153023.d/resources/
DATA_BASE_PATH: /work/jobs/16153023.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16
MODEL_STORE_PATH: /usit/abel/u1/jimmycallin//models/rnn-reproduce
CONFIG: --config={"words2vec_bin": null, "words_dim": 20.0, "filter_fn_name": u'conn_gt_0', "focus_dim": 6.0, "random_per_sample": 24.0, "final_dropout": 0.01608656108471007, "epochs": 200, "words2vec_txt": null, "focus_dropout_W": 0.4850461135349744, "rnn_dim": 50.0, "focus_dropout_U": 0.18210894621865603, "epochs_len": -1, "final_dim": 40.0, "epochs_patience": 10, "rnn_dropout_W": 0.16649459724958682, "words_dropout": 0.3543889040084549, "rnn_dropout_U": 0.4899141021546136}
Using Theano backend.
usage: train.py [-h] [--clean] [--config CONFIG]
                experiment_dir train_dir valid_dir
train.py: error: argument --config: invalid loads value: '{"words2vec_bin": null, "words_dim": 20.0, "filter_fn_name": u\'conn_gt_0\', "focus_dim": 6.0, "random_per_sample": 24.0, "final_dropout": 0.01608656108471007, "epochs": 200, "words2vec_txt": null, "focus_dropout_W": 0.4850461135349744, "rnn_dim": 50.0, "focus_dropout_U": 0.18210894621865603, "epochs_len": -1, "final_dim": 40.0, "epochs_patience": 10, "rnn_dropout_W": 0.16649459724958682, "words_dropout": 0.3543889040084549, "rnn_dropout_U": 0.4899141021546136}'

Currently Loaded Modulefiles:
  1) intel/2017.0

Job script resource usage:
       JobID  MaxVMSize     MaxRSS 
------------ ---------- ---------- 
16153023.ba+    414164K     32590K 

Job step resource usage:
       JobID    JobName  AllocCPUS  MaxVMSize     MaxRSS    Elapsed ExitCode 
------------ ---------- ---------- ---------- ---------- ---------- -------- 
16153023     rnn-repro+          2                         00:01:43      0:0 

Job 16153023 ("rnn-reproduce") completed on c16-3 at tis dec 13 16:39:47 CET 2016
Starting job 16156981 ("rnn-reproduce") on c15-15 at ons dec 14 00:32:48 CET 2016
Python environment is set up
Copying files to /work/jobs/16156981.d...
We are now in conll16st-v34-focused-rnns
Starting RNN run
NAME: 
LOCAL_BASE_DIR: /usit/abel/u1/jimmycallin/
EMBEDDING_PATH: /work/jobs/16156981.d/resources/
DATA_BASE_PATH: /work/jobs/16156981.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16
MODEL_STORE_PATH: /usit/abel/u1/jimmycallin//models/
CONFIG: --config={"words2vec_bin": null, "words_dim": 20.0, "filter_fn_name": u'conn_gt_0', "focus_dim": 6.0, "random_per_sample": 24.0, "final_dropout": 0.01608656108471007, "epochs": 200, "words2vec_txt": null, "focus_dropout_W": 0.4850461135349744, "rnn_dim": 50.0, "focus_dropout_U": 0.18210894621865603, "epochs_len": -1, "final_dim": 40.0, "epochs_patience": 10, "rnn_dropout_W": 0.16649459724958682, "words_dropout": 0.3543889040084549, "rnn_dropout_U": 0.4899141021546136}
Using Theano backend.
usage: train.py [-h] [--clean] [--config CONFIG]
                experiment_dir train_dir valid_dir
train.py: error: argument --config: invalid loads value: '{"words2vec_bin": null, "words_dim": 20.0, "filter_fn_name": u\'conn_gt_0\', "focus_dim": 6.0, "random_per_sample": 24.0, "final_dropout": 0.01608656108471007, "epochs": 200, "words2vec_txt": null, "focus_dropout_W": 0.4850461135349744, "rnn_dim": 50.0, "focus_dropout_U": 0.18210894621865603, "epochs_len": -1, "final_dim": 40.0, "epochs_patience": 10, "rnn_dropout_W": 0.16649459724958682, "words_dropout": 0.3543889040084549, "rnn_dropout_U": 0.4899141021546136}'

Currently Loaded Modulefiles:
  1) intel/2017.0

Job script resource usage:
       JobID  MaxVMSize     MaxRSS 
------------ ---------- ---------- 
16156981.ba+    371456K     28339K 

Job step resource usage:
       JobID    JobName  AllocCPUS  MaxVMSize     MaxRSS    Elapsed ExitCode 
------------ ---------- ---------- ---------- ---------- ---------- -------- 
16156981     rnn-repro+          2                         00:05:19      0:0 

Job 16156981 ("rnn-reproduce") completed on c15-15 at ons dec 14 00:38:04 CET 2016
Starting job 16157358 ("rnn-reproduce") on c15-15 at ons dec 14 01:18:04 CET 2016
Python environment is set up
Copying files to /work/jobs/16157358.d...
We are now in conll16st-v34-focused-rnns
Starting RNN run
NAME: 
LOCAL_BASE_DIR: /usit/abel/u1/jimmycallin/
EMBEDDING_PATH: /work/jobs/16157358.d/resources/
DATA_BASE_PATH: /work/jobs/16157358.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16
MODEL_STORE_PATH: /usit/abel/u1/jimmycallin//models/
CONFIG: --config={"words2vec_bin": null, "words_dim": 20.0, "filter_fn_name": "conn_gt_0", "focus_dim": 6.0, "random_per_sample": 24.0, "final_dropout": 0.01608656108471007, "epochs": 200, "words2vec_txt": null, "focus_dropout_W": 0.4850461135349744, "rnn_dim": 50.0, "focus_dropout_U": 0.18210894621865603, "epochs_len": -1, "final_dim": 40.0, "epochs_patience": 10, "rnn_dropout_W": 0.16649459724958682, "words_dropout": 0.3543889040084549, "rnn_dropout_U": 0.4899141021546136}
Using Theano backend.
[2016-12-14 01:20] configuration (/usit/abel/u1/jimmycallin//models/)
[2016-12-14 01:20]     config 'epochs': 200 (1000)
[2016-12-14 01:20]     config 'epochs_len': -1 (-1)
[2016-12-14 01:20]     config 'epochs_patience': 10 (20)
[2016-12-14 01:20]     config 'batch_size':  (64)
[2016-12-14 01:20]     config 'snapshot_size':  (2048)
[2016-12-14 01:20]     config 'random_per_sample': 24.0 (32)
[2016-12-14 01:20]     config 'words_dim': 20.0 (20)
[2016-12-14 01:20]     config 'focus_dim': 6.0 (4)
[2016-12-14 01:20]     config 'rnn_dim': 50.0 (20)
[2016-12-14 01:20]     config 'final_dim': 40.0 (100)
[2016-12-14 01:20]     config 'arg1_len':  (100)
[2016-12-14 01:20]     config 'arg2_len':  (100)
[2016-12-14 01:20]     config 'conn_len':  (10)
[2016-12-14 01:20]     config 'punc_len':  (2)
[2016-12-14 01:20]     config 'words_dropout': 0.354388904008 (0.1)
[2016-12-14 01:20]     config 'focus_dropout_W': 0.485046113535 (0.33)
[2016-12-14 01:20]     config 'focus_dropout_U': 0.182108946219 (0.66)
[2016-12-14 01:20]     config 'rnn_dropout_W': 0.16649459725 (0.33)
[2016-12-14 01:20]     config 'rnn_dropout_U': 0.489914102155 (0.33)
[2016-12-14 01:20]     config 'final_dropout': 0.0160865610847 (0.5)
[2016-12-14 01:20]     config 'filter_fn_name': conn_gt_0 (conn_eq_0)
[2016-12-14 01:20]     config 'words2vec_bin': None (None)
[2016-12-14 01:20]     config 'words2vec_txt': None (None)
[2016-12-14 01:20]   args.experiment_dir: /usit/abel/u1/jimmycallin//models/
[2016-12-14 01:20]   args.train_dir: /work/jobs/16157358.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-train
[2016-12-14 01:20]   args.valid_dir: /work/jobs/16157358.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-dev
[2016-12-14 01:20]   K._config: {u'image_dim_ordering': u'tf', u'backend': u'theano', u'floatx': u'float32', u'epsilon': 1e-07}
[2016-12-14 01:20]   os.getenv("THEANO_FLAGS"): None
[2016-12-14 01:20]   filter_types: None
[2016-12-14 01:20]   filter_senses: None
[2016-12-14 01:20]   filter_fn_name: conn_gt_0
[2016-12-14 01:20]   config: {u'words_dim': 20.0, u'random_per_sample': 24.0, u'focus_dim': 6.0, u'filter_fn_name': u'conn_gt_0', u'final_dropout': 0.01608656108471007, u'rnn_dropout_W': 0.16649459724958682, u'epochs': 200, u'epochs_len': -1, u'focus_dropout_W': 0.4850461135349744, u'words2vec_txt': None, u'words2vec_bin': None, u'final_dim': 40.0, u'rnn_dropout_U': 0.4899141021546136, u'focus_dropout_U': 0.18210894621865603, u'rnn_dim': 50.0, u'words_dropout': 0.3543889040084549, u'epochs_patience': 10}
[2016-12-14 01:20] load dataset for training (/work/jobs/16157358.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-train)
[2016-12-14 01:26] lang: ?, doc_ids: 1756, words: 933049, rel_ids: 17289, relation tokens: 676659
[2016-12-14 01:26] load dataset for validation (/work/jobs/16157358.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll16st-en-03-29-16-dev)
[2016-12-14 01:26] lang: ?, doc_ids: 79, words: 39712, rel_ids: 737, relation tokens: 28745
[2016-12-14 01:26] build indexes
[2016-12-14 01:26]   rel_senses2id: 22, words2id: 43918
[2016-12-14 01:26] build model
[2016-12-14 01:27]     config 'rsenses_loss':  (categorical_crossentropy)
[2016-12-14 01:27]     config 'optimizer':  (adam)
[2016-12-14 01:27] initialize weights
[2016-12-14 01:27] prepare snapshots
[2016-12-14 01:27] train model
/usit/abel/u1/jimmycallin/miniconda2/envs/rnn/lib/python2.7/site-packages/keras/engine/training.py:1397: UserWarning: Epoch comprised more than `samples_per_epoch` samples, which might affect learning results. Set `samples_per_epoch` correctly to avoid this warning.
  warnings.warn('Epoch comprised more than '
[2016-12-14 06:10] training finished
____________________________________________________________________________________________________
Layer (type)                       Output Shape        Param #     Connected to                     
====================================================================================================
arg1_ids (InputLayer)              (None, 100)         0                                            
____________________________________________________________________________________________________
arg2_ids (InputLayer)              (None, 100)         0                                            
____________________________________________________________________________________________________
conn_ids (InputLayer)              (None, 10)          0                                            
____________________________________________________________________________________________________
punc_ids (InputLayer)              (None, 2)           0                                            
____________________________________________________________________________________________________
shared_emb (Embedding)             multiple            878360      arg1_ids[0][0]                   
                                                                   arg2_ids[0][0]                   
                                                                   conn_ids[0][0]                   
                                                                   punc_ids[0][0]                   
____________________________________________________________________________________________________
gru_1 (GRU)                        (None, 100, 6)      486         shared_emb[0][0]                 
____________________________________________________________________________________________________
gru_15 (GRU)                       (None, 10, 6)       486         shared_emb[2][0]                 
____________________________________________________________________________________________________
gru_22 (GRU)                       (None, 2, 6)        486         shared_emb[3][0]                 
____________________________________________________________________________________________________
gru_8 (GRU)                        (None, 100, 6)      486         shared_emb[1][0]                 
____________________________________________________________________________________________________
timedistributed_1 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_10 (TimeDistributed(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_11 (TimeDistributed(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_12 (TimeDistributed(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_13 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_14 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_15 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_16 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_17 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_18 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_19 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_2 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_20 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_21 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_22 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_23 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_24 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_3 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_4 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_5 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_6 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_7 (TimeDistributed)(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_8 (TimeDistributed)(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_9 (TimeDistributed)(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
merge_1 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_1[0][0]          
____________________________________________________________________________________________________
merge_10 (Merge)                   (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_10[0][0]         
____________________________________________________________________________________________________
merge_11 (Merge)                   (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_11[0][0]         
____________________________________________________________________________________________________
merge_12 (Merge)                   (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_12[0][0]         
____________________________________________________________________________________________________
merge_13 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_13[0][0]         
____________________________________________________________________________________________________
merge_14 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_14[0][0]         
____________________________________________________________________________________________________
merge_15 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_15[0][0]         
____________________________________________________________________________________________________
merge_16 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_16[0][0]         
____________________________________________________________________________________________________
merge_17 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_17[0][0]         
____________________________________________________________________________________________________
merge_18 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_18[0][0]         
____________________________________________________________________________________________________
merge_19 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_19[0][0]         
____________________________________________________________________________________________________
merge_2 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_2[0][0]          
____________________________________________________________________________________________________
merge_20 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_20[0][0]         
____________________________________________________________________________________________________
merge_21 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_21[0][0]         
____________________________________________________________________________________________________
merge_22 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_22[0][0]         
____________________________________________________________________________________________________
merge_23 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_23[0][0]         
____________________________________________________________________________________________________
merge_24 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_24[0][0]         
____________________________________________________________________________________________________
merge_3 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_3[0][0]          
____________________________________________________________________________________________________
merge_4 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_4[0][0]          
____________________________________________________________________________________________________
merge_5 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_5[0][0]          
____________________________________________________________________________________________________
merge_6 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_6[0][0]          
____________________________________________________________________________________________________
merge_7 (Merge)                    (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_7[0][0]          
____________________________________________________________________________________________________
merge_8 (Merge)                    (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_8[0][0]          
____________________________________________________________________________________________________
merge_9 (Merge)                    (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_9[0][0]          
____________________________________________________________________________________________________
gru_10 (GRU)                       (None, 50)          10650       merge_8[0][0]                    
____________________________________________________________________________________________________
gru_11 (GRU)                       (None, 50)          10650       merge_9[0][0]                    
____________________________________________________________________________________________________
gru_12 (GRU)                       (None, 50)          10650       merge_10[0][0]                   
____________________________________________________________________________________________________
gru_13 (GRU)                       (None, 50)          10650       merge_11[0][0]                   
____________________________________________________________________________________________________
gru_14 (GRU)                       (None, 50)          10650       merge_12[0][0]                   
____________________________________________________________________________________________________
gru_16 (GRU)                       (None, 50)          10650       merge_13[0][0]                   
____________________________________________________________________________________________________
gru_17 (GRU)                       (None, 50)          10650       merge_14[0][0]                   
____________________________________________________________________________________________________
gru_18 (GRU)                       (None, 50)          10650       merge_15[0][0]                   
____________________________________________________________________________________________________
gru_19 (GRU)                       (None, 50)          10650       merge_16[0][0]                   
____________________________________________________________________________________________________
gru_2 (GRU)                        (None, 50)          10650       merge_1[0][0]                    
____________________________________________________________________________________________________
gru_20 (GRU)                       (None, 50)          10650       merge_17[0][0]                   
____________________________________________________________________________________________________
gru_21 (GRU)                       (None, 50)          10650       merge_18[0][0]                   
____________________________________________________________________________________________________
gru_23 (GRU)                       (None, 50)          10650       merge_19[0][0]                   
____________________________________________________________________________________________________
gru_24 (GRU)                       (None, 50)          10650       merge_20[0][0]                   
____________________________________________________________________________________________________
gru_25 (GRU)                       (None, 50)          10650       merge_21[0][0]                   
____________________________________________________________________________________________________
gru_26 (GRU)                       (None, 50)          10650       merge_22[0][0]                   
____________________________________________________________________________________________________
gru_27 (GRU)                       (None, 50)          10650       merge_23[0][0]                   
____________________________________________________________________________________________________
gru_28 (GRU)                       (None, 50)          10650       merge_24[0][0]                   
____________________________________________________________________________________________________
gru_3 (GRU)                        (None, 50)          10650       merge_2[0][0]                    
____________________________________________________________________________________________________
gru_4 (GRU)                        (None, 50)          10650       merge_3[0][0]                    
____________________________________________________________________________________________________
gru_5 (GRU)                        (None, 50)          10650       merge_4[0][0]                    
____________________________________________________________________________________________________
gru_6 (GRU)                        (None, 50)          10650       merge_5[0][0]                    
____________________________________________________________________________________________________
gru_7 (GRU)                        (None, 50)          10650       merge_6[0][0]                    
____________________________________________________________________________________________________
gru_9 (GRU)                        (None, 50)          10650       merge_7[0][0]                    
____________________________________________________________________________________________________
merge_25 (Merge)                   (None, 1200)        0           gru_2[0][0]                      
                                                                   gru_3[0][0]                      
                                                                   gru_4[0][0]                      
                                                                   gru_5[0][0]                      
                                                                   gru_6[0][0]                      
                                                                   gru_7[0][0]                      
                                                                   gru_9[0][0]                      
                                                                   gru_10[0][0]                     
                                                                   gru_11[0][0]                     
                                                                   gru_12[0][0]                     
                                                                   gru_13[0][0]                     
                                                                   gru_14[0][0]                     
                                                                   gru_16[0][0]                     
                                                                   gru_17[0][0]                     
                                                                   gru_18[0][0]                     
                                                                   gru_19[0][0]                     
                                                                   gru_20[0][0]                     
                                                                   gru_21[0][0]                     
                                                                   gru_23[0][0]                     
                                                                   gru_24[0][0]                     
                                                                   gru_25[0][0]                     
                                                                   gru_26[0][0]                     
                                                                   gru_27[0][0]                     
                                                                   gru_28[0][0]                     
____________________________________________________________________________________________________
dense_1 (Dense)                    (None, 40)          48040       merge_25[0][0]                   
____________________________________________________________________________________________________
srelu_1 (SReLU)                    (None, 40)          160         dense_1[0][0]                    
____________________________________________________________________________________________________
dropout_1 (Dropout)                (None, 40)          0           srelu_1[0][0]                    
____________________________________________________________________________________________________
dense_2 (Dense)                    (None, 22)          902         dropout_1[0][0]                  
____________________________________________________________________________________________________
rsenses (Activation)               (None, 22)          0           dense_2[0][0]                    
====================================================================================================
Total params: 1185006
____________________________________________________________________________________________________
Epoch 1/200
289s - loss: 0.3026 - acc: 0.9581 - val_loss: 2.3369 - val_acc: 0.2768
Epoch 2/200
286s - loss: 0.1011 - acc: 0.9667 - val_loss: 2.1086 - val_acc: 0.2890
Epoch 3/200
286s - loss: 0.0960 - acc: 0.9658 - val_loss: 2.0851 - val_acc: 0.2917
Epoch 4/200
286s - loss: 0.0950 - acc: 0.9673 - val_loss: 2.0869 - val_acc: 0.2049
Epoch 5/200
286s - loss: 0.0976 - acc: 0.9671 - val_loss: 2.0760 - val_acc: 0.2890
Epoch 6/200
280s - loss: 0.0885 - acc: 0.9689 - val_loss: 2.0739 - val_acc: 0.2890
Epoch 7/200
276s - loss: 0.0885 - acc: 0.9684 - val_loss: 2.0545 - val_acc: 0.2944
Epoch 8/200
275s - loss: 0.0917 - acc: 0.9684 - val_loss: 2.0683 - val_acc: 0.2836
Epoch 9/200
277s - loss: 0.0901 - acc: 0.9684 - val_loss: 2.0809 - val_acc: 0.2863
Epoch 10/200
276s - loss: 0.0868 - acc: 0.9684 - val_loss: 2.0536 - val_acc: 0.3026
Epoch 11/200
276s - loss: 0.0887 - acc: 0.9679 - val_loss: 2.0346 - val_acc: 0.3094
Epoch 12/200
277s - loss: 0.0866 - acc: 0.9683 - val_loss: 2.0405 - val_acc: 0.3026
Epoch 13/200
276s - loss: 0.0886 - acc: 0.9695 - val_loss: 2.0224 - val_acc: 0.3039
Epoch 14/200
276s - loss: 0.0888 - acc: 0.9699 - val_loss: 2.0125 - val_acc: 0.2904
Epoch 15/200
276s - loss: 0.0891 - acc: 0.9698 - val_loss: 2.0056 - val_acc: 0.3202
Epoch 16/200
276s - loss: 0.0881 - acc: 0.9694 - val_loss: 2.0043 - val_acc: 0.3066
Epoch 17/200
276s - loss: 0.0879 - acc: 0.9688 - val_loss: 2.0097 - val_acc: 0.3066
Epoch 18/200
277s - loss: 0.0862 - acc: 0.9701 - val_loss: 1.9592 - val_acc: 0.3134
Epoch 19/200
277s - loss: 0.0862 - acc: 0.9689 - val_loss: 1.9738 - val_acc: 0.3053
Epoch 20/200
278s - loss: 0.0870 - acc: 0.9697 - val_loss: 1.9938 - val_acc: 0.3216
Epoch 21/200
278s - loss: 0.0893 - acc: 0.9694 - val_loss: 1.9938 - val_acc: 0.3121
Epoch 22/200
280s - loss: 0.0810 - acc: 0.9709 - val_loss: 1.9577 - val_acc: 0.3256
Epoch 23/200
275s - loss: 0.0836 - acc: 0.9711 - val_loss: 1.9375 - val_acc: 0.3284
Epoch 24/200
276s - loss: 0.0848 - acc: 0.9683 - val_loss: 1.9465 - val_acc: 0.3256
Epoch 25/200
277s - loss: 0.0865 - acc: 0.9685 - val_loss: 1.9225 - val_acc: 0.3351
Epoch 26/200
276s - loss: 0.0827 - acc: 0.9707 - val_loss: 1.9085 - val_acc: 0.3460
Epoch 27/200
277s - loss: 0.0844 - acc: 0.9706 - val_loss: 1.9333 - val_acc: 0.3270
Epoch 28/200
276s - loss: 0.0807 - acc: 0.9712 - val_loss: 1.9180 - val_acc: 0.3270
Epoch 29/200
276s - loss: 0.0816 - acc: 0.9716 - val_loss: 1.9224 - val_acc: 0.3161
Epoch 30/200
276s - loss: 0.0814 - acc: 0.9717 - val_loss: 1.9225 - val_acc: 0.2836
Epoch 31/200
276s - loss: 0.0814 - acc: 0.9712 - val_loss: 1.9278 - val_acc: 0.3284
Epoch 32/200
276s - loss: 0.0814 - acc: 0.9716 - val_loss: 1.8964 - val_acc: 0.3270
Epoch 33/200
277s - loss: 0.0793 - acc: 0.9723 - val_loss: 1.9027 - val_acc: 0.3311
Epoch 34/200
276s - loss: 0.0809 - acc: 0.9728 - val_loss: 1.9098 - val_acc: 0.3256
Epoch 35/200
278s - loss: 0.0808 - acc: 0.9726 - val_loss: 1.9005 - val_acc: 0.3392
Epoch 36/200
276s - loss: 0.0797 - acc: 0.9716 - val_loss: 1.9072 - val_acc: 0.3351
Epoch 37/200
279s - loss: 0.0820 - acc: 0.9716 - val_loss: 1.9377 - val_acc: 0.2944
Epoch 38/200
279s - loss: 0.0861 - acc: 0.9702 - val_loss: 1.8833 - val_acc: 0.3460
Epoch 39/200
277s - loss: 0.0771 - acc: 0.9727 - val_loss: 1.8891 - val_acc: 0.3297
Epoch 40/200
278s - loss: 0.0808 - acc: 0.9711 - val_loss: 1.9091 - val_acc: 0.3406
Epoch 41/200
278s - loss: 0.0821 - acc: 0.9707 - val_loss: 1.8666 - val_acc: 0.3569
Epoch 42/200
279s - loss: 0.0810 - acc: 0.9716 - val_loss: 1.8683 - val_acc: 0.3392
Epoch 43/200
277s - loss: 0.0862 - acc: 0.9692 - val_loss: 1.9076 - val_acc: 0.3406
Epoch 44/200
278s - loss: 0.0797 - acc: 0.9716 - val_loss: 1.8661 - val_acc: 0.3528
Epoch 45/200
277s - loss: 0.0818 - acc: 0.9714 - val_loss: 1.9112 - val_acc: 0.2931
Epoch 46/200
279s - loss: 0.0831 - acc: 0.9709 - val_loss: 1.8605 - val_acc: 0.3351
Epoch 47/200
277s - loss: 0.0807 - acc: 0.9714 - val_loss: 1.9015 - val_acc: 0.3338
Epoch 48/200
276s - loss: 0.0805 - acc: 0.9716 - val_loss: 1.9123 - val_acc: 0.3066
Epoch 49/200
276s - loss: 0.0784 - acc: 0.9727 - val_loss: 1.8872 - val_acc: 0.3351
Epoch 50/200
277s - loss: 0.0788 - acc: 0.9723 - val_loss: 1.8688 - val_acc: 0.3528
Epoch 51/200
277s - loss: 0.0748 - acc: 0.9754 - val_loss: 1.8787 - val_acc: 0.3460
Epoch 52/200
276s - loss: 0.0762 - acc: 0.9734 - val_loss: 1.8890 - val_acc: 0.3324
Epoch 53/200
277s - loss: 0.0743 - acc: 0.9749 - val_loss: 1.9041 - val_acc: 0.3121
Epoch 54/200
276s - loss: 0.0764 - acc: 0.9737 - val_loss: 1.8808 - val_acc: 0.3365
Epoch 55/200
276s - loss: 0.0750 - acc: 0.9738 - val_loss: 1.9506 - val_acc: 0.3365
Epoch 56/200
275s - loss: 0.0774 - acc: 0.9739 - val_loss: 1.8719 - val_acc: 0.3487
Epoch 57/200
276s - loss: 0.0749 - acc: 0.9756 - val_loss: 1.9057 - val_acc: 0.3419


{"acc": 0.97560693866255654, "loss": -0.35685210312075982, "val_acc_max": 0.35685210312075982, "val_loss_min": 1.8604886690344222, "status": "ok", "val_acc": 0.34192672998643148, "loss_": 0.074857451027054669, "epochs_len": 57, "acc_max": 0.97560693866255654, "loss_min": 0.074339011183406925, "val_loss": 1.9056919135426245}

Currently Loaded Modulefiles:
  1) intel/2017.0

Job script resource usage:
       JobID  MaxVMSize     MaxRSS 
------------ ---------- ---------- 
16157358.ba+  26563064K  25136513K 

Job step resource usage:
       JobID    JobName  AllocCPUS  MaxVMSize     MaxRSS    Elapsed ExitCode 
------------ ---------- ---------- ---------- ---------- ---------- -------- 
16157358     rnn-repro+          2                         04:52:23      0:0 

Job 16157358 ("rnn-reproduce") completed on c15-15 at ons dec 14 06:10:23 CET 2016
Starting job 16164522 ("rnn-test-reproduce") on c17-34 at ons dec 14 15:09:51 CET 2016
Python environment is set up
Copying files to /work/jobs/16164522.d...
We are now in conll16st-v34-focused-rnns
CONFIG:
INPUT_PATH: /work/jobs/16164522.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll15st-en-03-29-16-blind-test/
EMBEDDING_PATH: /work/jobs/16164522.d/resources/
MODEL_PATH: /work/jobs/16164522.d/models/rnn-reproduce/
OUTPUT_PATH: /usit/abel/u1/jimmycallin//outputs/rnn-reproduce-conll15st-en-03-29-16-blind-test/
CONFIG: --config={"filter_fn_name":"conn_gt_0","words_dim":20,"focus_dim":6,"rnn_dim":50,"final_dim":40}
=========================
Using Theano backend.
[2016-12-14 15:19] configuration (/work/jobs/16164522.d/models/rnn-reproduce/)
[2016-12-14 15:19]     config 'epochs':  (1000)
[2016-12-14 15:19]     config 'epochs_len':  (-1)
[2016-12-14 15:19]     config 'epochs_patience':  (20)
[2016-12-14 15:19]     config 'batch_size':  (64)
[2016-12-14 15:19]     config 'snapshot_size':  (2048)
[2016-12-14 15:19]     config 'random_per_sample':  (32)
[2016-12-14 15:19]     config 'words_dim': 20 (20)
[2016-12-14 15:19]     config 'focus_dim': 6 (4)
[2016-12-14 15:19]     config 'rnn_dim': 50 (20)
[2016-12-14 15:19]     config 'final_dim': 40 (100)
[2016-12-14 15:19]     config 'arg1_len':  (100)
[2016-12-14 15:19]     config 'arg2_len':  (100)
[2016-12-14 15:19]     config 'conn_len':  (10)
[2016-12-14 15:19]     config 'punc_len':  (2)
[2016-12-14 15:19]     config 'words_dropout':  (0.1)
[2016-12-14 15:19]     config 'focus_dropout_W':  (0.33)
[2016-12-14 15:19]     config 'focus_dropout_U':  (0.66)
[2016-12-14 15:19]     config 'rnn_dropout_W':  (0.33)
[2016-12-14 15:19]     config 'rnn_dropout_U':  (0.33)
[2016-12-14 15:19]     config 'final_dropout':  (0.5)
[2016-12-14 15:19]     config 'filter_fn_name': conn_gt_0 (conn_eq_0)
[2016-12-14 15:19]     config 'words2vec_bin':  (None)
[2016-12-14 15:19]     config 'words2vec_txt':  (None)
[2016-12-14 15:19]   args.lang: en
[2016-12-14 15:19]   args.model_dir: /work/jobs/16164522.d/models/rnn-reproduce/
[2016-12-14 15:19]   args.dataset_dir: /work/jobs/16164522.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll15st-en-03-29-16-blind-test/
[2016-12-14 15:19]   args.output_dir: /usit/abel/u1/jimmycallin//outputs/rnn-reproduce-conll15st-en-03-29-16-blind-test/
[2016-12-14 15:19]   K._config: {u'image_dim_ordering': u'tf', u'backend': u'theano', u'floatx': u'float32', u'epsilon': 1e-07}
[2016-12-14 15:19]   os.getenv("THEANO_FLAGS"): None
[2016-12-14 15:19]   filter_types: None
[2016-12-14 15:19]   filter_senses: None
[2016-12-14 15:19]   filter_fn_name: conn_gt_0
[2016-12-14 15:19]   config: {u'focus_dim': 6, u'final_dim': 40, u'words_dim': 20, u'rnn_dim': 50, u'filter_fn_name': u'conn_gt_0'}
[2016-12-14 15:19] load dataset for prediction (/work/jobs/16164522.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll15st-en-03-29-16-blind-test/)
[2016-12-14 15:19] lang: ?, doc_ids: 71, words: 34621, rel_ids: 625, relation tokens: 25754
[2016-12-14 15:19]   rel_senses2id: 22, words2id: 43918
[2016-12-14 15:19] build model
[2016-12-14 15:20]     config 'rsenses_loss':  (categorical_crossentropy)
[2016-12-14 15:20]     config 'optimizer':  (adam)
[2016-12-14 15:20] previous weights (/work/jobs/16164522.d/models/rnn-reproduce/)
[2016-12-14 15:20] convert from dataset (/work/jobs/16164522.d/resources/conll16st-en-zh-dev-train-test_LDC2016E50/conll15st-en-03-29-16-blind-test/)
[2016-12-14 15:20] make predictions
[2016-12-14 15:22] convert predictions (/usit/abel/u1/jimmycallin//outputs/rnn-reproduce-conll15st-en-03-29-16-blind-test/)
/work/jobs/16164522.d/conll16st-v34-focused-rnns/v34/data_utils.py:208: VisibleDeprecationWarning: using a boolean instead of an integer will result in an error in the future
  totals[y_sum == 0.] = y_np[y_sum == 0.]  # prevent NaN
____________________________________________________________________________________________________
Layer (type)                       Output Shape        Param #     Connected to                     
====================================================================================================
arg1_ids (InputLayer)              (None, 100)         0                                            
____________________________________________________________________________________________________
arg2_ids (InputLayer)              (None, 100)         0                                            
____________________________________________________________________________________________________
conn_ids (InputLayer)              (None, 10)          0                                            
____________________________________________________________________________________________________
punc_ids (InputLayer)              (None, 2)           0                                            
____________________________________________________________________________________________________
shared_emb (Embedding)             multiple            878360      arg1_ids[0][0]                   
                                                                   arg2_ids[0][0]                   
                                                                   conn_ids[0][0]                   
                                                                   punc_ids[0][0]                   
____________________________________________________________________________________________________
gru_1 (GRU)                        (None, 100, 6)      486         shared_emb[0][0]                 
____________________________________________________________________________________________________
gru_15 (GRU)                       (None, 10, 6)       486         shared_emb[2][0]                 
____________________________________________________________________________________________________
gru_22 (GRU)                       (None, 2, 6)        486         shared_emb[3][0]                 
____________________________________________________________________________________________________
gru_8 (GRU)                        (None, 100, 6)      486         shared_emb[1][0]                 
____________________________________________________________________________________________________
timedistributed_1 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_10 (TimeDistributed(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_11 (TimeDistributed(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_12 (TimeDistributed(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_13 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_14 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_15 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_16 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_17 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_18 (TimeDistributed(None, 10, 20)      0           gru_15[0][0]                     
____________________________________________________________________________________________________
timedistributed_19 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_2 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_20 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_21 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_22 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_23 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_24 (TimeDistributed(None, 2, 20)       0           gru_22[0][0]                     
____________________________________________________________________________________________________
timedistributed_3 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_4 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_5 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_6 (TimeDistributed)(None, 100, 20)     0           gru_1[0][0]                      
____________________________________________________________________________________________________
timedistributed_7 (TimeDistributed)(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_8 (TimeDistributed)(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
timedistributed_9 (TimeDistributed)(None, 100, 20)     0           gru_8[0][0]                      
____________________________________________________________________________________________________
merge_1 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_1[0][0]          
____________________________________________________________________________________________________
merge_10 (Merge)                   (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_10[0][0]         
____________________________________________________________________________________________________
merge_11 (Merge)                   (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_11[0][0]         
____________________________________________________________________________________________________
merge_12 (Merge)                   (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_12[0][0]         
____________________________________________________________________________________________________
merge_13 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_13[0][0]         
____________________________________________________________________________________________________
merge_14 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_14[0][0]         
____________________________________________________________________________________________________
merge_15 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_15[0][0]         
____________________________________________________________________________________________________
merge_16 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_16[0][0]         
____________________________________________________________________________________________________
merge_17 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_17[0][0]         
____________________________________________________________________________________________________
merge_18 (Merge)                   (None, 10, 20)      0           shared_emb[2][0]                 
                                                                   timedistributed_18[0][0]         
____________________________________________________________________________________________________
merge_19 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_19[0][0]         
____________________________________________________________________________________________________
merge_2 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_2[0][0]          
____________________________________________________________________________________________________
merge_20 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_20[0][0]         
____________________________________________________________________________________________________
merge_21 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_21[0][0]         
____________________________________________________________________________________________________
merge_22 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_22[0][0]         
____________________________________________________________________________________________________
merge_23 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_23[0][0]         
____________________________________________________________________________________________________
merge_24 (Merge)                   (None, 2, 20)       0           shared_emb[3][0]                 
                                                                   timedistributed_24[0][0]         
____________________________________________________________________________________________________
merge_3 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_3[0][0]          
____________________________________________________________________________________________________
merge_4 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_4[0][0]          
____________________________________________________________________________________________________
merge_5 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_5[0][0]          
____________________________________________________________________________________________________
merge_6 (Merge)                    (None, 100, 20)     0           shared_emb[0][0]                 
                                                                   timedistributed_6[0][0]          
____________________________________________________________________________________________________
merge_7 (Merge)                    (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_7[0][0]          
____________________________________________________________________________________________________
merge_8 (Merge)                    (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_8[0][0]          
____________________________________________________________________________________________________
merge_9 (Merge)                    (None, 100, 20)     0           shared_emb[1][0]                 
                                                                   timedistributed_9[0][0]          
____________________________________________________________________________________________________
gru_10 (GRU)                       (None, 50)          10650       merge_8[0][0]                    
____________________________________________________________________________________________________
gru_11 (GRU)                       (None, 50)          10650       merge_9[0][0]                    
____________________________________________________________________________________________________
gru_12 (GRU)                       (None, 50)          10650       merge_10[0][0]                   
____________________________________________________________________________________________________
gru_13 (GRU)                       (None, 50)          10650       merge_11[0][0]                   
____________________________________________________________________________________________________
gru_14 (GRU)                       (None, 50)          10650       merge_12[0][0]                   
____________________________________________________________________________________________________
gru_16 (GRU)                       (None, 50)          10650       merge_13[0][0]                   
____________________________________________________________________________________________________
gru_17 (GRU)                       (None, 50)          10650       merge_14[0][0]                   
____________________________________________________________________________________________________
gru_18 (GRU)                       (None, 50)          10650       merge_15[0][0]                   
____________________________________________________________________________________________________
gru_19 (GRU)                       (None, 50)          10650       merge_16[0][0]                   
____________________________________________________________________________________________________
gru_2 (GRU)                        (None, 50)          10650       merge_1[0][0]                    
____________________________________________________________________________________________________
gru_20 (GRU)                       (None, 50)          10650       merge_17[0][0]                   
____________________________________________________________________________________________________
gru_21 (GRU)                       (None, 50)          10650       merge_18[0][0]                   
____________________________________________________________________________________________________
gru_23 (GRU)                       (None, 50)          10650       merge_19[0][0]                   
____________________________________________________________________________________________________
gru_24 (GRU)                       (None, 50)          10650       merge_20[0][0]                   
____________________________________________________________________________________________________
gru_25 (GRU)                       (None, 50)          10650       merge_21[0][0]                   
____________________________________________________________________________________________________
gru_26 (GRU)                       (None, 50)          10650       merge_22[0][0]                   
____________________________________________________________________________________________________
gru_27 (GRU)                       (None, 50)          10650       merge_23[0][0]                   
____________________________________________________________________________________________________
gru_28 (GRU)                       (None, 50)          10650       merge_24[0][0]                   
____________________________________________________________________________________________________
gru_3 (GRU)                        (None, 50)          10650       merge_2[0][0]                    
____________________________________________________________________________________________________
gru_4 (GRU)                        (None, 50)          10650       merge_3[0][0]                    
____________________________________________________________________________________________________
gru_5 (GRU)                        (None, 50)          10650       merge_4[0][0]                    
____________________________________________________________________________________________________
gru_6 (GRU)                        (None, 50)          10650       merge_5[0][0]                    
____________________________________________________________________________________________________
gru_7 (GRU)                        (None, 50)          10650       merge_6[0][0]                    
____________________________________________________________________________________________________
gru_9 (GRU)                        (None, 50)          10650       merge_7[0][0]                    
____________________________________________________________________________________________________
merge_25 (Merge)                   (None, 1200)        0           gru_2[0][0]                      
                                                                   gru_3[0][0]                      
                                                                   gru_4[0][0]                      
                                                                   gru_5[0][0]                      
                                                                   gru_6[0][0]                      
                                                                   gru_7[0][0]                      
                                                                   gru_9[0][0]                      
                                                                   gru_10[0][0]                     
                                                                   gru_11[0][0]                     
                                                                   gru_12[0][0]                     
                                                                   gru_13[0][0]                     
                                                                   gru_14[0][0]                     
                                                                   gru_16[0][0]                     
                                                                   gru_17[0][0]                     
                                                                   gru_18[0][0]                     
                                                                   gru_19[0][0]                     
                                                                   gru_20[0][0]                     
                                                                   gru_21[0][0]                     
                                                                   gru_23[0][0]                     
                                                                   gru_24[0][0]                     
                                                                   gru_25[0][0]                     
                                                                   gru_26[0][0]                     
                                                                   gru_27[0][0]                     
                                                                   gru_28[0][0]                     
____________________________________________________________________________________________________
dense_1 (Dense)                    (None, 40)          48040       merge_25[0][0]                   
____________________________________________________________________________________________________
srelu_1 (SReLU)                    (None, 40)          160         dense_1[0][0]                    
____________________________________________________________________________________________________
dropout_1 (Dropout)                (None, 40)          0           srelu_1[0][0]                    
____________________________________________________________________________________________________
dense_2 (Dense)                    (None, 22)          902         dropout_1[0][0]                  
____________________________________________________________________________________________________
rsenses (Activation)               (None, 22)          0           dense_2[0][0]                    
====================================================================================================
Total params: 1185006
____________________________________________________________________________________________________

Currently Loaded Modulefiles:
  1) intel/2017.0

Job script resource usage:
       JobID  MaxVMSize     MaxRSS 
------------ ---------- ---------- 
16164522.ba+   1769804K    827414K 

Job step resource usage:
       JobID    JobName  AllocCPUS  MaxVMSize     MaxRSS    Elapsed ExitCode 
------------ ---------- ---------- ---------- ---------- ---------- -------- 
16164522     rnn-test-+          4                         00:12:20      0:0 

Job 16164522 ("rnn-test-reproduce") completed on c17-34 at ons dec 14 15:22:08 CET 2016
